#cloud-config

# Update apt database on first boot (run 'apt-get update').
# Note, if packages are given, or package_upgrade is true, then
# update will be done independent of this setting.
#
# Default: false
# Aliases: apt_update
package_update: true

# Upgrade the instance on first boot
# (ie run apt-get upgrade)
#
# Default: false
# Aliases: apt_upgrade
package_upgrade: true

# add each entry to ~/.ssh/authorized_keys for the configured user or the
# first user defined in the user definition directive.
ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDH2qqulvK4CLXHm+UgM12cmykKijGqt5ZGZOmoIdJFargzIpKTvFNVAVamBZdlpeg0Ld0O9Z8f9RPLkC987sT/Ir1ZVc7+B8WNyTUy2cSznvOy90mJ37OpydYAkhq/wLS/PhKneb5ubOpfiCgvLRwAQ7SdUG7rcHo5QOdXogKWpoWE+A5ZN/BJnVoQr57lu1HLFBy/vMHTpg7lHwlopTg5DiNTsDaNF580JIpEZ9EeZSZj5Zu1AmdOEzbb+T96DfbgNh7YkwOr0iOHuolAi6ASnzfLCS4sFgO6hZgVJVWjMtG/8rcKIN+mkzRviip0+H3b12j3n6uca+unvRs6w+oHvLrUsPjLXa7DcgYInNw9dARVYvb3DJQ5VdDEfMoF9x4LqsGwAK8eNntXGPuFfljakJtUYQEspGyz6AJ5Q6jeRZy1laLMnphoYshjyaVPosW9yXhDGsyShwWS2ZOW4A5YcB4hE1Z6BQi287ye5vZuEI//X1THF4ed3QAqPIPyG9E= root@DESKTOP-IUENACA

#cloud-config

apt:
  sources:
    docker.list:
      source: deb [arch=amd64] https://download.docker.com/linux/ubuntu $RELEASE stable
      keyid: 9DC858229FC7DD38854AE2D88D81803C0EBFCD88

packages:
  - apt-transport-https
  - ca-certificates
  - curl
  - gnupg-agent
  - software-properties-common
  - docker-ce
  - docker-ce-cli
  - containerd.io

# Enable ipv4 forwarding, required on CIS hardened machines
write_files:
  - path: /etc/sysctl.d/enabled_ipv4_forwarding.conf
    content: |
      net.ipv4.conf.all.forwarding=1

# create the docker group
groups:
  - docker

# Add default auto created user to docker group
system_info:
  default_user:
    groups: [docker]
